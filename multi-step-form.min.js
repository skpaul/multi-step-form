!function($){$.fn.multiStepForm=function(validationRules){function showError($message,$element){$.sweetModal({content:$message,icon:$.sweetModal.ICON_WARNING}),$element.addClass("error"),$("html,body").animate({scrollTop:$element.offset().top-50},1e3);var name=$element.attr("name"),classes=$element.attr("class");console.log("name:"+name+", classes:"+classes)}$(".goToPrevSection").bind("click.multiStepForm",(function(event){event.preventDefault();var section=$(this.closest(".formSection"));section.css("display","none"),section.prev().css("display","block"),$element=$(section).prev().find("p:first-child"),$("html,body").animate({scrollTop:$element.offset().top-50},1e3)})),$(".goToNextSection").bind("click.multiStepForm",(function(event){event.preventDefault();var section=$(this.closest(".formSection")),hasError=!1,message="";if($(".validate",section).each((function(index,element){if($element=$(element),$element.hasClass("checkVisibility")){var closestToggleVisibleWrapper=$element.closest(".toggleVisibleWrapper");if(void 0!==closestToggleVisibleWrapper&&closestToggleVisibleWrapper.hasClass("hidden"))return}if(!$element.parent(".field").hasClass("hidden")){var title=$element.attr("data-title");void 0===title&&(title=$element.parent(".field").find("label").html());var value=$element.val(),isRequired=$element.attr("data-required");if(!1!==isRequired&&void 0!==isRequired){var checked;if($element.is(":checkbox"))if(!$element.is(":checked"))return hasError=!0,showError(message="<strong>"+title+"</strong> required.",$element),!1;if("required"==isRequired&&""==value)return hasError=!0,showError(message="<strong>"+title+"</strong> required.",$element),!1}if(""!=$.trim(String(value))){let isInvalid;if(isDoubleByte($.trim(String(value))))return hasError=!0,showError(message="<strong>"+title+"</strong> must be in english.",$element),!1}var dataType=$element.attr("data-datatype");if(!1!==dataType&&void 0!==dataType){var length=$.trim(value).length;if("required"==isRequired||"optional"==isRequired&&length>0)switch(dataType){case"letters":var re;if(!(re=/^[a-z\s]+$/i).test(value))return hasError=!0,showError(message="<strong>"+title+"</strong> invalid.",$element),!1;break;case"email":var re;if(!(re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(value))return hasError=!0,showError(message="<strong>"+title+"</strong> invalid.",$element),!1;break;case"mobile":if(!IsMobileNumberValid(value))return hasError=!0,showError(message="<strong>"+title+"</strong> invalid.",$element),!1;break;case"integer":case"float":case"double":case"decimal":if(isNaN(value))return hasError=!0,showError(message="<strong>"+title+"</strong> must be a valid number.",$element),!1;break;case"date":var dateValue;if(!moment(value,"DD-MM-YYYY").isValid())return hasError=!0,showError(message="<strong>"+title+"</strong> invalid.",$element),!1}}var minLength=$element.attr("data-minlen");if(!1!==minLength&&void 0!==minLength){var length=$.trim(value).length;if(minLength=parseInt(minLength),("required"==isRequired||"optional"==isRequired&&length>0)&&length<minLength)return hasError=!0,showError(message="<strong>"+title+"</strong> must be equal or greater than "+minLength+" characters.",$element),!1}var maxLength=$element.attr("data-maxlen");if(!1!==maxLength&&void 0!==maxLength){var length=$.trim(value).length;if(maxLength=parseInt(maxLength),("required"==isRequired||"optional"==isRequired&&length>0)&&length>maxLength)return hasError=!0,console.log($element.attr("name")),showError(message="<strong>"+title+"</strong> must be equal or less than "+maxLength+" characters.",$element),!1}var exactLength=$element.attr("data-exactlen");if(!1!==exactLength&&void 0!==exactLength){var length=$.trim(value).length;if(exactLength=parseInt(exactLength),("required"==isRequired||"optional"==isRequired&&length>0)&&length!==exactLength)return hasError=!0,console.log($element.attr("name")),showError(message="<strong>"+title+"</strong> must have "+exactLength+" characters.",$element),!1}var minValue=$element.attr("data-minval");if(!1!==minValue&&void 0!==minValue){if(!1!==dataType&&void 0===dataType)return hasError=!0,showError(message="Datatype undefined for <strong>"+title+"</strong>.",$element),!1;var length=$.trim(value).length;if("required"==isRequired||"optional"==isRequired&&length>0){if(("integer"==dataType||"float"==dataType||"double"==dataType||"decimal"==dataType)&&isNaN(value))return hasError=!0,showError(message="<strong>"+title+"</strong> must be a valid number.",$element),!1;switch(dataType){case"integer":value=parseInt(value),minValue=parseInt(minValue);break;case"float":case"double":case"decimal":value=parseFloat(value),minValue=parseFloat(minValue);break;case"date":var value;if(!(value=moment(value,"DD-MM-YYYY")).isValid())return hasError=!0,showError(message="<strong>"+title+"</strong> invalid.",$element),!1;minValue=moment(minValue,"DD-MM-YYYY");break;default:return hasError=!0,showError(message="Datatype undefined for <strong>"+title+"</strong>.",$element),!1}if(value<minValue)return hasError=!0,showError(message="<strong>"+title+"</strong> must be equal or greater than "+minValue+".",$element),!1}}var maxValue=$element.attr("data-maxval");if(!1!==maxValue&&void 0!==maxValue){if(!1!==dataType&&void 0===dataType)return hasError=!0,showError(message="Datatype undefined for "+title+".",$element),!1;var length=$.trim(value).length;if("required"==isRequired||"optional"==isRequired&&length>0){if(("integer"==dataType||"float"==dataType||"double"==dataType||"decimal"==dataType)&&isNaN(value))return hasError=!0,showError(message="<strong>"+title+"</strong> must be a valid number.",$element),!1;switch(dataType){case"integer":value=parseInt(value),maxValue=parseInt(maxValue);break;case"float":case"double":case"decimal":value=parseFloat(value),maxValue=parseFloat(maxValue);break;case"date":var value;if(!(value=moment(value,"DD-MM-YYYY")).isValid())return hasError=!0,showError(message=title+" invalid.",$element),!1;maxValue=moment(maxValue,"DD-MM-YYYY");break;default:return hasError=!0,showError(message="Datatype undefined for <strong>"+title+"</strong>.",$element),!1}if(value>maxValue)return hasError=!0,showError(message="<strong>"+title+"</strong> must be equal or less than "+maxValue+".",$element),!1}}var exactValue=$element.attr("data-exactval");if(!1!==exactValue&&void 0!==exactValue){if(!1!==dataType&&void 0===dataType)return hasError=!0,showError(message="Datatype undefined for "+title+".",$element),!1;var length=$.trim(value).length;if("required"==isRequired||"optional"==isRequired&&length>0){if(("integer"==dataType||"float"==dataType||"double"==dataType||"decimal"==dataType)&&isNaN(value))return hasError=!0,showError(message="<strong>"+title+"</strong> must be a valid number.",$element),!1;switch(dataType){case"integer":value=parseInt(value),exactValue=parseInt(exactValue);break;case"float":case"double":case"decimal":value=parseFloat(value),exactValue=parseFloat(exactValue);break;case"date":var value;if(!(value=moment(value,"DD-MM-YYYY")).isValid())return hasError=!0,showError(message="<strong>"+title+"</strong> invalid.",$element),!1;exactValue=moment(exactValue,"DD-MM-YYYY");break;default:return hasError=!0,showError(message="Datatype undefined for <strong>"+title+"</strong>.",$element),!1}if(value!=exactValue)return hasError=!0,showError(message="<strong>"+title+"</strong> must be equal to "+exactValue+".",$element),!1}}}function isDoubleByte(str){for(var i=0,n=str.length;i<n;i++)if(str.charCodeAt(i)>255)return!0;return!1}})),hasError)return hasError=!1,void $(this).css("pointer-events","");validationRules&&0==validationRules()||(section.css("display","none"),section.next().css("display","block"),$element=$(section).next().find("p:first-child"),$("html,body").animate({scrollTop:$element.offset().top-50},1e3))})),$("#showPreview").click((function(e){var form=$("form");$("label.required").removeClass("required").addClass("white-required"),$(".formSection",form).each((function(index,formSection){$formSection=$(formSection),$formSection.show();var allFormControls=$(".formControl",$formSection);$(allFormControls).each((function(index,currentControl){if($currentControl=$(currentControl),$currentControl.hasClass("sectionNavigation")&&$currentControl.hide(),!$currentControl.hasClass("dontEnable")){if($currentControl.css({"pointer-events":"none",border:"transparent",padding:"0","text-indent":"1px"}),$currentControl.css({"-webkit-appearance":"none","-moz-appearance":"none",appearance:"none"}),$currentControl.is(":radio")){let checked;$currentControl.is(":checked")?$currentControl.addClass("hidden"):$currentControl.closest("label").addClass("hidden")}$currentControl.is("textarea")&&$currentControl.css({"-webkit-appearance":"none","-moz-appearance":"none",appearance:"none"})}}))})),$(".sectionNavigation").hide(),$("#submitSection").show()})),$("#closePreview").click((function(e){var form=$("form");$("label.white-required").addClass("required").removeClass("white-required"),$(".formSection",form).each((function(index,element){$element=$(element);var allFormControls=$(".formControl",$element);$(allFormControls).each((function(index,currentControl){$(currentControl).hasClass("dontEnable")||$(this).css({"pointer-events":"",border:"1px solid rgba(172, 168, 168, 0.5)",padding:"5px 10px","-webkit-appearance":"","-moz-appearance":"","text-indent":"0px"})}))})),$("form .formSection:not(:last)").hide(),$("#submitSection").hide(),$(".sectionNavigation").show()}))}}(jQuery);